<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="CSS/dash_subadmin_edit.css">
    <title>dash_employee</title>
</head>
<body>
    <div class="subadmineditdashboard">
        <h1 id="header">Welcome <span id="welcome"></span></h1>
        <button id="logout" onclick="logoutbtnhandler()">logout</button>
        <table>
            <thead>
                <tr>
                    <th>id</th>
                    <th>name</th>
                    <th>dob</th>
                    <th>age</th>
                    <th>mob</th>
                    <th>present address</th>
                    <th>permanent address</th>
                    <th>email</th>
                    <th>edit</th>
                </tr>
            </thead>
            <tbody id="tabledata"></tbody>

        </table>
    </div>
</body>

<script>
    var id = localStorage.getItem("login_id");
    var d = {id:id};
    var xhr = new XMLHttpRequest();
    xhr.open("POST", "http://localhost:8080/employee/getIdDetails",true);
    xhr.setRequestHeader("Content-Type", "application/json;charset=UTF-8");
    xhr.onload = function () {
        var employee = JSON.parse(xhr.responseText);
        console.log(employee)
        tabledata(employee);
    }
    xhr.send(JSON.stringify(d));

    //TABLE DATA
    function tabledata(employee) {
        let html = "";
        
        html = "<tr><td>" + employee.id + "</td><td>" + employee.name + "</td><td>" + employee.dob + "</td><td>" + employee.age + "</td><td>" + employee.mob + "</td><td>" + employee.presentAddress + "</td><td>" + employee.permanentAddress + "</td><td>" + employee.email + "</td><td><button  onclick='edit(" + employee.id + ")'>edit</button></td></tr>"
        
        console.log(html);
        var tab = document.getElementById("tabledata");
        tab.innerHTML = html;
        var wel = document.getElementById("welcome");
        wel.innerHTML = employee.name;
    }

    //EDIT BUTTON HANDLER
    function edit(id){
        window.location.href = "update_employee.html";
    }

    //LOGOUT BUTTON HANDLER
    function logoutbtnhandler(){
        window.location.href = "login.html";
    }
</script>

</html>